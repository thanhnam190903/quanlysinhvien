<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="admin/layout/head :: head"></head>
<style>
    .card {
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
    }

    .card:hover {
        transform: translateY(-10px);
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
    }

    .card .card-body {
        padding: 20px;
    }

    .card-title {
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 15px;
    }

    .card-icon {
        background-color: #f4f4f4;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .card .d-flex {
        align-items: center;
    }

    .card h6 {
        font-size: 22px;
        font-weight: bold;
    }

    .info-card {
        background-color: #ffffff;
        border-left: 5px solid #5cb85c; /* Green border */
    }

    .revenue-card {
        background-color: #ffffff;
        border-left: 5px solid #f0ad4e; /* Orange border */
    }

    .customers-card {
        background-color: #ffffff;
        border-left: 5px solid #d9534f; /* Red border */
    }

    .main-content {
        padding-top: 20px;
        padding-left: 20px;
        padding-right: 20px;
    }

    .row {
        margin-bottom: 30px; /* Thêm khoảng cách dưới mỗi hàng */
    }
</style>
<body>
<div th:replace="admin/layout/header :: header"></div>

<div class="container-fluid p-0">
    <div class="row m-0">
        <div th:replace="admin/layout/navbar :: navbar"></div>

        <div class="col-md-9 col-lg-9 main-content">

            <div class="table-container">
                <div class="profile-card">
                    <div class="profile-header">
                        <div class="avatar">
                            <i class="fa-solid fa-user"></i>
                        </div>
                        <div>
                            <h3 class="name" th:text="${profile.name}">Nguyễn Văn An</h3>
                            <p class="role" th:text="${#strings.listJoin(
        profile.roles.![
            name == 'ROLE_admin' ? 'Quản trị hệ thống' :
            name == 'ROLE_teacher' ? 'Giáo viên' :
            name == 'ROLE_staff' ? 'Nhân viên' :
            name == 'ROLE_student' ? 'Sinh viên' :
            'Không xác định'
        ],
   ', ')}">Quản trị hệ thống</p>
                        </div>
                    </div>

                    <div class="profile-body">
                        <div class="form-group">
                            <label>Họ và tên</label>
                            <input type="text" th:value="${profile.name}" required>
                        </div>

                        <div class="form-group">
                            <label>Chức vụ</label>
                            <input type="text" class="form-control"
                                   th:value="${#strings.listJoin(
                profile.roles.![
                    name == 'ROLE_admin' ? 'Quản trị viên' :
                    name == 'ROLE_teacher' ? 'Giáo viên' :
                    name == 'ROLE_staff' ? 'Nhân viên' :
                    name == 'ROLE_student' ? 'Sinh viên' :
                    'Không xác định'
                ],
           ', ')}"
                                   readonly>
                        </div>

                        <div class="form-group">
                            <label>Ngày sinh</label>
                            <input type="date" th:value="${profile.dateOfBirth}" required>
                        </div>

                        <div class="form-group">
                            <label>Email</label>
                            <input type="text" th:value="${profile.email}" required>
                        </div>

                        <div class="form-group">
                            <label>Số điện thoại</label>
                            <input type="text" th:value="${profile.phone}" required>
                        </div>
                    </div>

                    <div class="profile-footer">
                        <button class="btn primary">
                            <i class="fa-solid fa-pen"></i> Chỉnh sửa thông tin cá nhân
                        </button>
                        <button class="btn secondary" data-bs-toggle="modal" data-bs-target="#changePass">
                            <i class="fa-solid fa-key"></i> Đổi mật khẩu
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="changePass" tabindex="-1"
     aria-labelledby="changePass" aria-hidden="true" th:classappend="${showModal} ? 'show d-block' : ''">
    <div class="modal-dialog modal-md"><!-- nhỏ hơn modal-lg -->
        <div class="modal-content">
            <div class="modal-header btn-search">
                <h5 class="modal-title" >Thay đổi mật khẩu</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"
                        aria-label="Đóng"></button>
            </div>
            <div class="modal-body">
                <!-- Form thêm người dùng -->
                <form id="addUserForm" th:action="@{/change-password}" method="post">
                    <div th:if="${error != null}">
                        <span th:text="${error}"></span>
                    </div>
                    <div class="g-2">
                        <div class="col-12 mb-2">
                            <label class="form-label">Mật khẩu cũ</label>
                            <input type="text"  class="form-control" name="oldPass" required>
                        </div>
                        <div class="col-12 mb-2">
                            <label class="form-label">Mật khẩu mới</label>
                            <input type="text"  class="form-control" name="newPass" required>
                        </div>
                        <div class="col-12 mb-2">
                            <label class="form-label">Xác nhận mật khẩu</label>
                            <input type="text"  class="form-control" name="confirmPass" required>
                        </div>
                    </div>


                    <div class="d-flex mt-3 gap-2">
                        <button type="submit" class="btn btn-primary flex-fill">Thêm mới</button>
                        <a type="button" class="btn btn-secondary flex-fill" data-bs-dismiss="modal">Thoát</a>
                    </div>
                </form>
                <div id="alertMessage" class="mt-3"></div>
            </div>
        </div>
    </div>
</div>
<script th:if="${success != null}">

</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
</body>
</html>